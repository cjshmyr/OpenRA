# Buildings provide a proximity condition for being nearby.
# Buildings have a condition when damaged.
# Buildings can be repaired by engineers.
^Building:
	ProximityExternalCondition:
		Condition: nearallybuilding
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical
	Targetable@REPAIR:
		RequiresCondition: damaged
		TargetTypes: Repair

# Allow infantry to auto-heal close enough to base buildings
^Infantry:
	ExternalCondition@NEARALLYBUILDING:
		Condition: nearallybuilding
	GrantCondition@INBASE:
		RequiresCondition: nearallybuilding
		Condition: inbase
	SelfHealing@DAMAGEDINBASE:
		Step: 500
		Delay: 100
		HealIfBelow: 100
		DamageCooldown: 125
		RequiresCondition: damaged && inbase
	WithDecoration@DAMAGEDINBASE:
		Image: pips
		Sequence: pip-heal
		ReferencePoint: Bottom, Right
		RequiresCondition: damaged && inbase
		BlinkInterval: 32
		BlinkPattern: Off, On

# AI's purchased vehicles cost nothing.
# Vehicles have a condition when damaged.
# Vehicles can be repaired by engineers.
^Vehicle:
	Valued:
		Cost: 0
	GrantConditionOnDamageState@DAMAGED:
		Condition: damaged
		ValidDamageStates: Light, Medium, Heavy, Critical
	Targetable@REPAIR:
		RequiresCondition: damaged
		TargetTypes: Repair